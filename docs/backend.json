{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the SereneQuote application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "username": {
          "type": "string",
          "description": "The username of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "username",
        "email"
      ]
    },
    "Quote": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Quote",
      "type": "object",
      "description": "Represents a quote displayed in the SereneQuote application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Quote entity."
        },
        "text": {
          "type": "string",
          "description": "The text content of the quote."
        },
        "author": {
          "type": "string",
          "description": "The author of the quote."
        },
        "dateAdded": {
          "type": "string",
          "description": "The date when the quote was added to the application.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "text",
        "author",
        "dateAdded"
      ]
    },
    "FavoriteQuote": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FavoriteQuote",
      "type": "object",
      "description": "Represents a user's favorite quote.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the FavoriteQuote entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N FavoriteQuote)"
        },
        "quoteId": {
          "type": "string",
          "description": "Reference to Quote. (Relationship: Quote 1:N FavoriteQuote)"
        },
        "dateFavorited": {
          "type": "string",
          "description": "The date when the quote was favorited.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "quoteId",
        "dateFavorited"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information. Uses path-based ownership; only the user with the matching userId can access their own document.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/quotes/{quoteId}",
        "definition": {
          "entityName": "Quote",
          "schema": {
            "$ref": "#/backend/entities/Quote"
          },
          "description": "Stores global quote data. This collection can be read by all users.",
          "params": [
            {
              "name": "quoteId",
              "description": "The unique identifier for the quote."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/favoriteQuotes/{favoriteQuoteId}",
        "definition": {
          "entityName": "FavoriteQuote",
          "schema": {
            "$ref": "#/backend/entities/FavoriteQuote"
          },
          "description": "Stores the user's favorite quotes. Uses path-based ownership; only the user with the matching userId can access their own favorite quotes.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "favoriteQuoteId",
              "description": "The unique identifier for the favorite quote."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to ensure security, scalability, and debuggability, adhering to the core design principles of Authorization Independence, Clarity of Intent, DBAC (Database-Based Access Control), and QAPs (Rules are not Filters).  Authorization Independence is achieved through path-based ownership for private user data and denormalization for collaborative data (if any were required, which it is not in this case). The design employs Structural Segregation by keeping data with different access requirements in separate collections (e.g., user profiles and global quotes). Access Modeling is standardized using path-based ownership for user-specific data. The structure supports secure `list` operations (QAPs) because each collection is designed with a homogeneous security posture, and rules can be written to allow listing based on the path. The integrity of ownership is maintained by the hierarchical path structure."
  }
}